{"ast":null,"code":"import _regeneratorRuntime from\"/home/tofusupreme/code/TofuSupreme/react-weather-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/tofusupreme/code/TofuSupreme/react-weather-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/tofusupreme/code/TofuSupreme/react-weather-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/tofusupreme/code/TofuSupreme/react-weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import Search from\"./components/search/search\";import CurrentWeather from'./components/current-weather/current-weather';import Forecast from'./components/forecast/forecast';import{WEATHER_API_URL,WEATHER_API_KEY}from'./api';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentWeather=_useState2[0],setCurrentWeather=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentForecast=_useState4[0],setForecast=_useState4[1];var handleOnSearchChange=function handleOnSearchChange(searchData){var _searchData$value$spl=searchData.value.split(\" \"),_searchData$value$spl2=_slicedToArray(_searchData$value$spl,2),lat=_searchData$value$spl2[0],lon=_searchData$value$spl2[1];var currentWeatherFetch=fetch(\"\".concat(WEATHER_API_URL,\"/weather?lat=\").concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(WEATHER_API_KEY,\"&units=metric\"));var forecastFetch=fetch(\"\".concat(WEATHER_API_URL,\"/forecast?lat=\").concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(WEATHER_API_KEY,\"&units=metric\"));Promise.all([currentWeatherFetch,forecastFetch]).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){var weatherResponse,forecastResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response[0].json();case 2:weatherResponse=_context.sent;_context.next=5;return response[1].json();case 5:forecastResponse=_context.sent;setCurrentWeather(_objectSpread({city:searchData.label},weatherResponse));setForecast(_objectSpread({city:searchData.label},forecastResponse));case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){return console.log(err);});};console.log(currentWeather);console.log(currentForecast);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Search,{onSearchChange:handleOnSearchChange}),currentWeather&&/*#__PURE__*/_jsx(CurrentWeather,{data:currentWeather}),currentForecast&&/*#__PURE__*/_jsx(Forecast,{data:currentForecast})]});}export default App;","map":{"version":3,"names":["Search","CurrentWeather","Forecast","WEATHER_API_URL","WEATHER_API_KEY","useState","App","currentWeather","setCurrentWeather","currentForecast","setForecast","handleOnSearchChange","searchData","value","split","lat","lon","currentWeatherFetch","fetch","forecastFetch","Promise","all","then","response","json","weatherResponse","forecastResponse","city","label","catch","err","console","log"],"sources":["/home/tofusupreme/code/TofuSupreme/react-weather-app/src/App.js"],"sourcesContent":["import './App.css';\nimport Search from \"./components/search/search\";\nimport CurrentWeather from './components/current-weather/current-weather';\nimport Forecast from './components/forecast/forecast';\nimport { WEATHER_API_URL, WEATHER_API_KEY } from './api';\nimport { useState } from 'react';\n\nfunction App() {\n  const [currentWeather, setCurrentWeather] = useState(null);\n  const [currentForecast, setForecast] = useState(null);\n\n  const handleOnSearchChange = (searchData) => {\n    const [lat, lon] = searchData.value.split(\" \");\n\n    const currentWeatherFetch = fetch(`${WEATHER_API_URL}/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`);\n\n    const forecastFetch = fetch(`${WEATHER_API_URL}/forecast?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`);\n\n    Promise.all([currentWeatherFetch, forecastFetch])\n      .then(async (response) => {\n      const weatherResponse  = await response[0].json();\n      const forecastResponse = await response[1].json()\n\n        setCurrentWeather({city: searchData.label, ...weatherResponse});\n        setForecast({city: searchData.label, ...forecastResponse});\n    })\n      .catch((err) => console.log(err));\n  }\n  console.log(currentWeather);\n  console.log(currentForecast);\n\n  return (\n\n<div className=\"container\">\n      <Search onSearchChange={handleOnSearchChange} />\n      {currentWeather && <CurrentWeather data={currentWeather} />}\n      {currentForecast && <Forecast data={currentForecast} />}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"ujBAAA,MAAO,WAAP,CACA,MAAOA,OAAP,KAAmB,4BAAnB,CACA,MAAOC,eAAP,KAA2B,8CAA3B,CACA,MAAOC,SAAP,KAAqB,gCAArB,CACA,OAASC,eAAT,CAA0BC,eAA1B,KAAiD,OAAjD,CACA,OAASC,QAAT,KAAyB,OAAzB,C,wFAEA,QAASC,IAAT,EAAe,CACb,cAA4CD,QAAQ,CAAC,IAAD,CAApD,wCAAOE,cAAP,eAAuBC,iBAAvB,eACA,eAAuCH,QAAQ,CAAC,IAAD,CAA/C,yCAAOI,eAAP,eAAwBC,WAAxB,eAEA,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAuB,CAACC,UAAD,CAAgB,CAC3C,0BAAmBA,UAAU,CAACC,KAAX,CAAiBC,KAAjB,CAAuB,GAAvB,CAAnB,gEAAOC,GAAP,2BAAYC,GAAZ,2BAEA,GAAMC,oBAAmB,CAAGC,KAAK,WAAIf,eAAJ,yBAAmCY,GAAnC,iBAA8CC,GAA9C,mBAA2DZ,eAA3D,kBAAjC,CAEA,GAAMe,cAAa,CAAGD,KAAK,WAAIf,eAAJ,0BAAoCY,GAApC,iBAA+CC,GAA/C,mBAA4DZ,eAA5D,kBAA3B,CAEAgB,OAAO,CAACC,GAAR,CAAY,CAACJ,mBAAD,CAAsBE,aAAtB,CAAZ,EACGG,IADH,4FACQ,iBAAOC,QAAP,+KACyBA,SAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,EADzB,QACAC,eADA,qCAEyBF,SAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,EAFzB,QAEAE,gBAFA,eAIJlB,iBAAiB,gBAAEmB,IAAI,CAAEf,UAAU,CAACgB,KAAnB,EAA6BH,eAA7B,EAAjB,CACAf,WAAW,gBAAEiB,IAAI,CAAEf,UAAU,CAACgB,KAAnB,EAA6BF,gBAA7B,EAAX,CALI,sDADR,gEAQGG,KARH,CAQS,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EART,EASD,CAhBD,CAiBAC,OAAO,CAACC,GAAR,CAAYzB,cAAZ,EACAwB,OAAO,CAACC,GAAR,CAAYvB,eAAZ,EAEA,mBAEF,aAAK,SAAS,CAAC,WAAf,wBACM,KAAC,MAAD,EAAQ,cAAc,CAAEE,oBAAxB,EADN,CAEOJ,cAAc,eAAI,KAAC,cAAD,EAAgB,IAAI,CAAEA,cAAtB,EAFzB,CAGOE,eAAe,eAAI,KAAC,QAAD,EAAU,IAAI,CAAEA,eAAhB,EAH1B,GAFE,CAQD,CAED,cAAeH,IAAf"},"metadata":{},"sourceType":"module"}